# =============================================================================
# GNM Fine-tuning Config for CostNav Sidewalk Navigation
# (adapted from third_party/NavDP/baselines/gnm/configs/gnm.yaml)
# =============================================================================

project_name: gnm-costnav
run_name: gnm-costnav-finetune

# Training setup
use_wandb: True  # Set to True if you want to log to wandb
wandb_entity: maumai  # Your wandb entity/team name
train: True
pretrained_checkpoint: ${PROJECT_ROOT}/checkpoints/gnm.pth
batch_size: 128
eval_batch_size: 128
epochs: 20
gpu_ids: [0]
num_workers: 4
lr: 7e-4
optimizer: adam
seed: 42

# Model params (GNM architecture)
model_type: gnm
obs_encoding_size: 1024
goal_encoding_size: 1024

# Normalization for the action space
normalize: True

# Context
context_type: temporal
context_size: 5

# Trade-off between action and distance prediction loss
alpha: 0.5

# Distance bounds for distance and action predictions
distance:
  min_dist_cat: 0
  max_dist_cat: 20
action:
  min_dist_cat: 0
  max_dist_cat: 10
close_far_threshold: 10

# Action output params
len_traj_pred: 5
learn_angle: True

# Dataset specific parameters
image_size: [85, 64]  # width, height
goal_type: "image"

# CostNav dataset configuration
datasets:
  nova_carter_vint:
    data_folder: # Enter your data directory here (ex. "/mnt/raid11/workspace/vint_training")
    train: # Enter your train directory here (ex. "/mnt/raid11/workspace/vint_training_splits/train")
    test: # Enter your test directory here (ex. "/mnt/raid11/workspace/vint_training_splits/test")
    end_slack: 3
    goals_per_obs: 2
    negative_mining: True
    waypoint_spacing: 1
    metric_waypoint_spacing: 0.25  # average spacing between waypoints (meters) - automatically updates data_config.yaml

# Logging
log_dir: # Enter your log directory here (ex. /mnt/harbor/users/${USERNAME}/checkpoint/costnav)
print_log_freq: 100
image_log_freq: 1000
num_images_log: 8
pairwise_test_freq: 0
eval_fraction: 0.25
wandb_log_freq: 10
eval_freq: 1
